<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentence Similarity</title>
    <style>
        textarea {
            width: 100%;
            box-sizing: border-box;
            padding: 10px;
            font-size: 16px;
            resize: none; /* Disable manual resizing */
            overflow: hidden;
        }
    </style>
</head>
<body>
    <h1>Compare Sentences</h1>
    
    <form id="similarityForm">
        <label for="answer">Answer:</label>
        <textarea id="answer" name="answer" required oninput="adjustHeight(this)"></textarea><br><br>

        <label for="attempt1">Attempt 1:</label>
        <textarea id="attempt1" name="attempt1" required oninput="adjustHeight(this)"></textarea><br><br>

        <label for="attempt2">Attempt 2:</label>
        <textarea id="attempt2" name="attempt2" required oninput="adjustHeight(this)"></textarea><br><br>

        <label for="attempt3">Attempt 3:</label>
        <textarea id="attempt3" name="attempt3" required oninput="adjustHeight(this)"></textarea><br><br>

        <button type="button" onclick="checkSimilarity()">Check Similarity</button>
    </form>
    
    <p id="result"></p>

    <script>
        // Adjust textarea height dynamically based on content
        function adjustHeight(element) {
            element.style.height = 'auto'; // Reset the height
            element.style.height = element.scrollHeight + 'px'; // Adjust based on content
        }

        async function checkSimilarity() {
            const answer = document.getElementById('answer').value;
            const attempt1 = document.getElementById('attempt1').value;
            const attempt2 = document.getElementById('attempt2').value;
            const attempt3 = document.getElementById('attempt3').value;

            const sentences = [
                { attempt: attempt1, label: 'Attempt 1' },
                { attempt: attempt2, label: 'Attempt 2' },
                { attempt: attempt3, label: 'Attempt 3' }
            ];

            document.getElementById('result').innerHTML = '';

            for (const sentence of sentences) {
                const response = await fetch('http://127.0.0.1:5000/similarity', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ sentence1: answer, sentence2: sentence.attempt }),
                });

                const data = await response.json();
                document.getElementById('result').innerHTML += `<p>${sentence.label} Similarity Score: ${data.similarity}%</p>`;
            }
        }
    </script>
</body>
</html>
